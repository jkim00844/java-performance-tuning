# 21. 반드시 튜닝해야 하는 대상은?

* 1. 개요
* 2. 파레토 법칙
* 3. 프로젝트별 튜닝 대상 예제
* 4. 정리

---
## 1. 개요

시간적 여유가 있으면 만들어진 모든 화면을 모두 분석할 수도 있다.  
하지만, 현실적으로 모든 화면에 대해서 분석하는 것은 불가능하다.  
때문에, 튜닝이 꼭 필요한 대상을 선정해야 한다.

---
## 2. 파레토 법칙

파레토 법칙은 이탈리아 경제학자인 빌프레도 파레토가 만든 이론이다.  
1906년, 이탈리아 토지의 80%를 이탈리아 인구의 20%가 소유하고 있다는 사실을 알아냈다.
 * 즉, 상위 20%가 전체 부의 80%를 차지한다는 의미이다.
 * 소프트웨어 시스템에서도 이러한 파레토 법칙이 적용된다. 자주 사용되는 상위 20%의 화면이 80% 이상의 시스템 리소스를 사용한다.

---
## 3. 프로젝트별 튜닝 대상 예제

 * 프로젝트에서 요구 사항을 만들어 내는 대상은 고객이다. 때문에, 고객사에게 예상되는 화면을 선정해 달라고 요청할 수도 있다.

```
1. 병원 시스템
 - 초기화면: 로그인
 - 원무: 환자 접수 신청
 - 진료: 환조 조회, 처방전 지정, 치료 일수 입력, 처방 내림, 외래 기록지 저장
 - 원무: 수납조회, 수납처리

2. 그룹웨어 시스템
 * 계약을 위한 메일을 보냈는데 메일 수신이 안되거나, 메일이 스팸으로 처리되거나 하면 큰 문제가 발생될 수 있다.
 * 로그인이 안되면 메일, 게시, 결재 등 중요한 업무를 처리할 기회조차 없다.
 * 초기화면 로그인시 40회 이상의 요청이 수행된다. (로그인 프로세스 관련, 포틀릿 관련, SSO 컴포넌트, 기타 등) 떄문에 로그인에서 필요없는 요청이 있는지 확인이 필요하다.
 * * 포틀릿: 동적 컨텐츠를 생성하는 웹 컴포넌트
 - 로그인: 로그인 화면 및 초기 화면
 - 메일: 메일 목록 및 상세 조회, 메일 작성 및 발송
 - 게시: 게시물 목록 및 상세 조회
 - 결재: 결재 목록 및 상세 조회, 결재 작성 및 상신, 결재 수행
 - 임직원 조회: 임직원 조회 및 상세 조회
 - 커뮤니티: 커뮤니티 초기 화면, 게시물 목록 및 상세 조회, 게시물 작성
 - 메신저: 사용자 목록, 메시지 전송 및 수신

3. 쇼핑몰 시스템
 - 메인 화면: 초기화면, 대분류선택, 중분류선택, 소분류선택
 - 검색: 상품 검색, 상품 상세 조회
 - 전자 결제: 로그인 및 즉시 결제 선택, 구매자 상세 정보 입력, 전자 결제 수행
 - My Page: 구매한 상품 목록
 - 이벤트: 이벤트 조회
```

* 코드성 데이터를 가져오기 위한 반복되는 쿼리는 static과 같은 메모리에 코드성 데이터를 올려서 처리할 수 있다.
* System.exit(int) 메소드는 절대로 사용하지 말라. 
* * System.exit() 메소드는 현재 수행 중인 JVM을 종료하는 메소드이다.
* * 때문에, 해당 메소드가 호출되면 기동한 WAS 인스턴스가 소리 소문 없이 사라질 것이다.
* * 대부분 main 메소드로 수행하는 프로그래밍으로 Java를 처음 배울때는 해당 메소드를 호출해도 별 문제는 없다.

---
## 4. 정리

성능을 분석할 대상을 정할 때, 모든 화면을 대상으로 하는 것은 상당히 무모한 행동이다.  
시간적 여유가 있다면 모니터링 툴을 이용해서 전체 화면을 점검하는 것을 권장하지만, 시간 대비 효율을 따졌을 때 비효율적인 작업이 될 수 있다.  

따라서, 로그인 및 초기 화면과 가장 많이 사용하는 화면을 위주로 성능을 분석하는 것이 가장 현명한 방법이다.  

 * 추가적으로 코드 인스펙션 툴을 사용하여 프로그램 상의 규칙 및 문제점을 잡아낼 수 있다.
 * ex) PMD, CheckStyle, Hammurapii 등

